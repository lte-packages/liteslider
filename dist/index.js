(()=>{let e=e=>{let t=window.visualViewport.width,i=Object.keys(e).filter(e=>e<t),s=(i=i.map(e=>Number(e))).length>0?Math.max(...i):Math.min(...Object.keys(e).map(Number));return e[s]},t=function(e,t){let i=[];for(let s=0;s<e.length;s++)i.push(t*s);return i},i=function(e,t,i){let s=e.scrollLeft;s=s+e.clientWidth-t;let r=i.filter(e=>e>=s);return 0==r.length?s:Math.min(...r)},s=function(e,t,i){let s=e.scrollLeft;s=s-e.clientWidth+t;let r=i.filter(e=>e<=s);return 0==r.length?0:Math.max(...r)},r=function(e,r,n){if(!r)return;let l=r.querySelectorAll(".slider-item");if(!l||0===l.length)return;let o=function(e,r,n,l){let o=r[0].clientWidth+l,d=t(r,o),h=0;switch(n){case"next":h=i(e,l,d);break;case"previous":h=s(e,l,d)}return h}(r,l,e,n);r.scrollTo({left:o,behavior:"smooth"})},n=function(e){var t,i,s;let r=e.sliderInner.clientWidth,n=e.getGap(),l=(t=r-e.getPreview(),(t-n*((i=e.getItemsToShow())-1))/i);return e.sliderInner.style.gap="0 "+n+"px",s=e.elements,s.forEach(e=>{e.style.flexBasis=l+"px"}),e.tempTotalWidth=l*e.elements.length+n*(e.elements.length-1),e},l=function(e,t){let i;return function(){let s=arguments;i||(e.apply(this,s),i=!0,setTimeout(()=>i=!1,t))}},o=function(e,t,...i){let s=this;"onscrollend"in window?e.addEventListener("scrollend",()=>{t.apply(s,i)}):e.addEventListener("scroll",()=>{clearTimeout(window.scrollEndTimer),window.scrollEndTimer=setTimeout(()=>{t.apply(s,i)},50)})},d=function(e){let t=new CustomEvent("sliderRefresh",{detail:{sliderElement:e}});window.dispatchEvent(t)},h={};h.init=function(e){this.slider=e,this.render(),this.addEventListeners()},h.getPageCount=function(){return Math.ceil(this.slider.elements.length/this.slider.getItemsToShow())},h.render=function(){this.slider.pagerEl.innerHTML="";let e=this.slider.getItemsToShow();if(1===e)return;let t=Array.from(this.slider.elements),i=this.getPageCount();for(let s=0;s<i;s++){let i=s*e,r=i+e,n=t.slice(i,r)[0].offsetLeft,l=function(e,t,i,s,r){t>i.length&&(t=i.length),t-=1;let n=document.createElement("button");return n.classList.add("slider-pager-item"),n.setAttribute("data-page-start",e),n.setAttribute("data-page-end",t),n.setAttribute("data-scrollto",s),n.type="button",n.innerHTML=`<span>${r+1}</span>`,n}(i,r,this.slider.elements,n,s);this.slider.pagerEl.appendChild(l)}},h.addEventListeners=function(){let e=this.slider;this.slider.pagerEl.addEventListener("click",t=>{!function(e,t,i){if(!e||!t||!i)return;let s=e.closest(".slider-pager-item");if(!s)return;let r=s.getAttribute("data-scrollto");r&&(t.querySelectorAll(".slider-pager-item").forEach(e=>{e.classList.remove("active")}),s.classList.add("active"),i.scrollTo({left:r,behavior:"smooth"}))}(t.target,e.slider,e.sliderInner)})},h.setActivePagerItem=function(){let e=this.slider,t=e.slider.querySelectorAll(".slider-pager-item");(t=Array.from(t)).reverse();let i=!1;t.forEach(t=>{i=function(e,t,i,s){var r;let n,l,o=(r=e.getAttribute("data-page-end"),t&&0!==t.length?("string"==typeof r&&(r=parseInt(r,10)),isNaN(r)||r<0||r>=t.length)?null:t[r]:null);return!i&&o&&(n=o.getBoundingClientRect(),l=s.getBoundingClientRect(),n.left>=l.left&&n.left<=l.right)&&(e.classList.add("active"),i=!0),i}(t,e.elements,i,e.slider)})};var a=function(e){let t=Object.create(h);return t.init(e),t};let c={};c.init=function(e,t,i="hidden"){(this.responsive=t,this.slider=e,this.sliderInner=this.slider.querySelector(".slider-inner"),this.isSliding=!1,this.isBtnClick=!1,this.sliderInner)?(this.elements=this.sliderInner.querySelectorAll(".slider-item"),this.buttons=this.slider.querySelector(".slider-nav"),this.prevButton=this.slider.querySelector(".slider-prev"),this.nextButton=this.slider.querySelector(".slider-next"),this.pagerEl=this.slider.querySelector(".slider-pager"),this.sliderId=this.slider.id||null,this.hiddenClass=i,this.pagerEl&&(this.pager=a(this)),this.addListeners(),window.addEventListener("sliderRefresh",e=>{e.detail&&e.detail.sliderElement===this.slider&&this.refresh()})):console.warn("Slider inner element not found.")},c.moveToPrevious=function(){this.isSliding||(this.isSliding=!0,r("previous",this.sliderInner,this.getGap()))},c.moveToNext=function(){this.isSliding||(this.isSliding=!0,r("next",this.sliderInner,this.getGap()))},c.checkButtons=function(){!function(e,t,i,s=!1){t&&(e.scrollLeft<50?(t.setAttribute("disabled",!0),s&&i.focus()):t.removeAttribute("disabled"));let r=e.scrollWidth-e.clientWidth;i&&(e.scrollLeft>=r-50?(i.setAttribute("disabled",!0),s&&t.focus()):i.removeAttribute("disabled"))}(this.sliderInner,this.prevButton,this.nextButton,this.isBtnClick),this.isBtnClick=!1},c.addListeners=function(){this.prevButton&&this.prevButton.addEventListener("click",()=>{this.isBtnClick=!0,this.moveToPrevious()}),this.nextButton&&this.nextButton.addEventListener("click",()=>{this.isBtnClick=!0,this.moveToNext()}),this._onScrollEnd(),this._keyboardNavigation(),this._loadAndResize()},c._loadAndResize=function(){let e,t=function(...t){let i=this;return clearTimeout(e),new Promise(s=>{e=setTimeout(()=>{s(n.apply(i,t))},50)})},i=()=>{t(this).then(e=>{e.showHideButtons(),e.checkButtons(),e.pager&&(e.pager.render(),e.checkPager())}).catch(e=>{console.error(e)})};window.addEventListener("DOMContentLoaded",i),window.addEventListener("resize",i)},c._onScrollEnd=function(){let e=this,t=l(()=>{e.checkPager()},50);this.sliderInner.addEventListener("scroll",t),o(this.sliderInner,()=>{e.checkButtons(),e.isSliding=!1})},c._keyboardNavigation=function(){let e=this;this.sliderInner.addEventListener("keydown",function(t){"ArrowLeft"===t.key&&(t.preventDefault(),e.moveToPrevious()),"ArrowRight"===t.key&&(t.preventDefault(),e.moveToNext()),"Home"===t.key&&(t.preventDefault(),e.sliderInner.scrollTo({left:0,behavior:"smooth"})),"End"===t.key&&(t.preventDefault(),e.sliderInner.scrollTo({left:e.sliderInner.scrollWidth,behavior:"smooth"}))})},c.showHideButtons=function(){void 0!=this.buttons&&(this.sliderInner.clientWidth>=this.tempTotalWidth?this.buttons.classList.add(this.hiddenClass):this.buttons.classList.remove(this.hiddenClass))},c.getGap=function(){return e(this.responsive).gutter},c.getItemsToShow=function(){return e(this.responsive).items},c.getPreview=function(){let t=e(this.responsive);return t.preview?parseInt(t.preview,10):0},c.checkPager=function(){this.pager&&(1===this.pager.getPageCount()?this.pagerEl.classList.add(this.hiddenClass):this.pagerEl.classList.remove(this.hiddenClass),this.slider.querySelectorAll(".slider-pager-item").forEach(e=>{e.classList.remove("active")}),this.pager.setActivePagerItem())},c.refresh=function(){let e=Array.from(this.sliderInner.querySelectorAll(".slider-item")).filter(e=>"none"!==window.getComputedStyle(e).display);this.elements=e,n(this),this.showHideButtons(),this.checkButtons(),this.pager&&(this.pager.render(),this.checkPager())};var u=function(e,t,i){let s=Object.create(c);return s.init(e,t,i),s};window.slider=function({container:e=".slider",responsive:t={0:{items:2,gutter:16},576:{items:3,gutter:16},768:{items:4,gutter:16},992:{items:5,gutter:16},1200:{items:6,gutter:16}},hiddenClass:i="hidden"}={}){let s=document.querySelectorAll(e);window.sliderRefresh=window.sliderRefresh||d,s.forEach(e=>{u(e,t,i)})}})();
//# sourceMappingURL=index.js.map
